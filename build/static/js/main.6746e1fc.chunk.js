(this["webpackJsonpstar-db"]=this["webpackJsonpstar-db"]||[]).push([[0],{27:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(21),c=n.n(s),i=n(6),o=n(7),l=n(11),u=n(10),p=(n(27),n(14)),d=n(0),j=function(){return Object(d.jsxs)("div",{className:"header d-flex",children:[Object(d.jsx)("h3",{children:Object(d.jsx)(p.b,{to:"/",children:"Star DB"})}),Object(d.jsxs)("ul",{className:"d-flex",children:[Object(d.jsx)("li",{children:Object(d.jsx)(p.b,{to:"/people/",children:"People"})}),Object(d.jsx)("li",{children:Object(d.jsx)(p.b,{to:"/planets/",children:"Planets"})}),Object(d.jsx)("li",{children:Object(d.jsx)(p.b,{to:"/starships/",children:"Starships"})})]})]})},h=n(5),f=n.n(h),m=n(13),b=function(){function e(){var t=this;Object(i.a)(this,e),this._apiBase="https://swapi.dev/api",this._ImageUrlBase="https://starwars-visualguide.com/assets/img",this.extractId=function(e){return e.match(/\/([0-9]*)\/$/)[1]},this.transformPerson=function(e){return{id:t.extractId(e.url),name:e.name,gender:e.gender,birthYear:e.birth_year,eyeColor:e.eye_color}},this.getAllPeople=Object(m.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t.transformPerson));case 4:case"end":return e.stop()}}),e)}))),this.getPerson=function(){var e=Object(m.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/"+n);case 2:return a=e.sent,e.abrupt("return",t.transformPerson(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.transformPlanet=function(e){return{id:t.extractId(e.url),name:e.name,population:e.population,diameter:e.diameter,period:e.rotation_period}},this.getAllPlanet=Object(m.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t.transformPlanet));case 4:case"end":return e.stop()}}),e)}))),this.getPlanet=function(){var e=Object(m.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/planets/"+n);case 2:return a=e.sent,e.abrupt("return",t.transformPlanet(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.transformStarship=function(e){return{id:t.extractId(e.url),name:e.name,model:e.model,manufacturer:e.manufacturer,costInCredits:e.cost_in_credits,length:e.length,crew:e.crew,passengers:e.passengers,cargoCapacity:e.cargoCapacity}},this.getAllStarships=Object(m.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/");case 2:return n=e.sent,e.abrupt("return",n.results.map(t.transformStarship));case 4:case"end":return e.stop()}}),e)}))),this.getStarship=function(){var e=Object(m.a)(f.a.mark((function e(n){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/"+n);case 2:return a=e.sent,e.abrupt("return",t.transformStarship(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getPersonImage=function(e){var n=e.id;return"".concat(t._ImageUrlBase,"/characters/").concat(n,".jpg")},this.getStarshipImage=function(e){var n=e.id;return"".concat(t._ImageUrlBase,"/starships/").concat(n,".jpg")},this.getPlanetImage=function(e){var n=e.id;return"".concat(t._ImageUrlBase,"/planets/").concat(n,".jpg")},this.validateTerm=function(e){return e.split(/\?|=|&|\//g).join(" ")},this.getSearchPeople=function(){var e=Object(m.a)(f.a.mark((function e(n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.validateTerm(n),e.next=3,t.getResource("/people/?search=".concat(a));case 3:return r=e.sent,e.abrupt("return",{foundPeople:r.results.map(t.transformPerson),dataPeople:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getFoundPeoplePage=function(){var e=Object(m.a)(f.a.mark((function e(n){var a,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=/(\/people\/\?search=)([a-zA-Z])(&page=)([0-9]*)/,r=n.match(a)[0],e.next=4,t.getResource(r);case 4:return s=e.sent,e.abrupt("return",{foundPeople:s.results.map(t.transformPerson),dataPeople:s});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}return Object(o.a)(e,[{key:"getResource",value:function(){var e=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase)+t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(this._apiBase+t,", recived ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),g=(n(38),r.a.createContext()),O=g.Provider,x=g.Consumer,v=(n(39),function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h5",{children:"Oops..."}),Object(d.jsx)("p",{children:"Something go wrong"})]})}),P=(n(40),function(){return Object(d.jsx)("div",{className:"loadingio-spinner-eclipse-o4362mbylv",children:Object(d.jsx)("div",{className:"ldio-7u5e9lfcd4h",children:Object(d.jsx)("div",{})})})}),y=(n(41),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={planet:{},loading:!0,error:!1},e.onPlanetLoaded=function(t){e.setState({planet:t,loading:!1,error:!1})},e.onError=function(){e.setState({error:!0,loading:!1})},e.swapi=new b,e.updatePlanet=function(){var t=Math.floor(25*Math.random())+3;e.swapi.getPlanet(t).then(e.onPlanetLoaded).catch(e.onError)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.updatePlanet(),this.interval=setInterval(this.updatePlanet,5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.planet,n=e.loading,a=e.error,r=!(n||a),s=n?Object(d.jsx)(P,{}):null,c=r?Object(d.jsx)(w,{planet:t}):null,i=a?Object(d.jsx)(v,{}):null;return Object(d.jsxs)("div",{className:"random-planet jumbotron rounded",children:[s,c,i]})}}]),n}(a.Component));function w(e){var t=e.planet,n=t.id,a=t.name,s=t.population,c=t.period,i=t.diameter;return Object(d.jsxs)(r.a.Fragment,{children:[Object(d.jsx)("img",{className:"planet-image",src:"https://starwars-visualguide.com/assets/img/planets/".concat(n,".jpg"),alt:"planet img"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h4",{children:a}),Object(d.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"term",children:"Population"}),Object(d.jsx)("span",{children:s})]}),Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"term",children:"Rotation Period"}),Object(d.jsx)("span",{children:c})]}),Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"term",children:"Diameter"}),Object(d.jsx)("span",{children:i})]})]})]})]})}var I=n(3),S=function(e){return function(t){Object(l.a)(a,t);var n=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))).state={data:null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getData().then((function(t){e.setState({data:t})}))}},{key:"render",value:function(){var t=this.state.data;return t?Object(d.jsx)(e,Object(I.a)(Object(I.a)({},this.props),{},{data:t})):Object(d.jsx)(P,{})}}]),a}(a.Component)},C=function(e,t){return function(n){return Object(d.jsx)(x,{children:function(a){var r=a.swapi,s=t(r);return Object(d.jsx)(e,Object(I.a)(Object(I.a)({},n),s))}})}},k=(n(42),function(e){var t=e.data,n=e.onItemSelected,a=e.children,r=t.map((function(e){var t=e.id,r=a(e);return Object(d.jsx)("li",{className:"list-group-item",onClick:function(){return n(t)},children:r},t)}));return Object(d.jsx)("ul",{className:"item-list list-group",children:r})}),N=function(e,t){return function(n){return Object(d.jsx)(e,Object(I.a)(Object(I.a)({},n),{},{children:t}))}},A=function(e){var t=e.name;return Object(d.jsx)("span",{children:t})},D=C(S(N(k,A)),(function(e){return{getData:e.getAllPeople}})),R=C(S(N(k,(function(e){var t=e.name,n=e.model;return Object(d.jsx)("span",{children:"".concat(t," (").concat(n,")")})}))),(function(e){return{getData:e.getAllStarships}})),_=C(S(N(k,A)),(function(e){return{getData:e.getAllPlanet}})),U=n(2),B=Object(U.e)((function(e){var t=e.history;e.match;return Object(d.jsx)(D,{onItemSelected:function(e){return t.push(e)}})})),E=(n(43),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).swapi=new b,e.state={item:null,image:null},e.updateItem=function(){var t=e.props,n=t.itemId,a=t.getData,r=t.getImageURL;n&&a(n).then((function(t){return e.setState({item:t,image:r(t)})}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.updateItem()}},{key:"componentDidUpdate",value:function(e){this.props.itemId!==e.itemId&&this.updateItem()}},{key:"render",value:function(){var e=this.state,t=e.item,n=e.image;if(!this.state.item)return Object(d.jsx)("span",{children:"Select a person from a list"});var a=t.name;return Object(d.jsxs)("div",{className:"person-details card",children:[Object(d.jsx)("img",{className:"person-image",src:n,alt:"img"}),Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("h4",{children:a}),Object(d.jsx)("ul",{className:"list-group list-group-flush",children:r.a.Children.map(this.props.children,(function(e,n){return r.a.cloneElement(e,{item:t})}))})]})]})}}]),n}(a.Component)),L=function(e){var t=e.item,n=e.label,a=e.field;return Object(d.jsxs)("li",{className:"list-group-item",children:[Object(d.jsx)("span",{className:"term",children:n}),Object(d.jsx)("span",{children:t[a]})]})},M=C((function(e){return Object(d.jsxs)(E,Object(I.a)(Object(I.a)({},e),{},{children:[Object(d.jsx)(L,{field:"population",label:"Population:"}),Object(d.jsx)(L,{field:"period",label:"Rotation period:"}),Object(d.jsx)(L,{field:"diameter",label:"Diameter:"})]}))}),(function(e){return{getData:e.getPlanet,getImageURL:e.getPlanetImage}})),F=function(e){var t=e.leftItem,n=e.rightItem;return Object(d.jsxs)("div",{className:"row mb2 item-section",children:[Object(d.jsx)("div",{className:"col-md-6",children:t}),Object(d.jsx)("div",{className:"col-md-6",children:n})]})},T=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedItem:null},e.onItemSelected=function(t){e.setState({selectedItem:t})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.selectedItem;return Object(d.jsx)(F,{leftItem:Object(d.jsx)(_,{onItemSelected:this.onItemSelected}),rightItem:Object(d.jsx)(M,{itemId:e})})}}]),n}(r.a.Component),J=Object(U.e)((function(e){var t=e.history;return Object(d.jsx)(R,{onItemSelected:function(e){t.push(e)}})})),z=C((function(e){return Object(d.jsxs)(E,Object(I.a)(Object(I.a)({},e),{},{children:[Object(d.jsx)(L,{field:"model",label:"Model:"}),Object(d.jsx)(L,{field:"length",label:"Length:"}),Object(d.jsx)(L,{field:"costInCredits",label:"Cost:"})]}))}),(function(e){return{getData:e.getStarship,getImageURL:e.getStarshipImage}})),G=function(e){var t=e.keys,n=e.onClick,a=e.lable,r=e.isDisabled,s=void 0!==r&&r;return Object(d.jsx)("button",{type:"button",onClick:n,className:"btn btn-info",disabled:s,children:a},t)},K=function(e,t){return e.map((function(e){var n=e.id,a=e.name,r=String(n);return Object(d.jsx)("li",{className:"list-group-item",onClick:function(e){return t.push("/people/"+r)},children:a},n)}))},W=(n(44),function(e){var t=e.nextPage,n=e.prevPage,a=e.foundCount,r=e.loading,s=e.onChangePage,c=n?Object(d.jsx)(G,{onClick:function(){return s(c)},lable:"< Prev"},"prev"):Object(d.jsx)(G,{onClick:function(){return s(c)},lable:"< Prev",isDisabled:!0},"prev"),i=t?Object(d.jsx)(G,{onClick:function(){return s(i)},lable:"Next >"},"next"):Object(d.jsx)(G,{onClick:function(){return s(i)},lable:"Next >",isDisabled:!0},"next");return a>10&&!r?Object(d.jsxs)("div",{className:"btn-group btn-group_pagination",children:[c,i]}):null}),Y=(n(45),function(e){var t=e.state,n=e.onChange,a=e.onInput,r=e.onChangePage,s=e.history,c=t.nextPage,i=t.prevPage,o=t.foundCount,l=t.foundPeople,u=t.loading,p=t.term,j=1===o?"match":"matches",h=null!==o?Object(d.jsxs)("h6",{className:"found-count",children:["Found ",o," ",j]}):null,f=u?Object(d.jsx)(P,{}):null;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h4",{className:"section-article",children:"Find a character"}),Object(d.jsxs)("div",{style:{display:"flex"},children:[Object(d.jsx)("input",{value:p,type:"text",className:"form-control search-input",placeholder:"Type to search",onChange:n,onKeyDown:function(e){return"Enter"===e.code&&a()}}),Object(d.jsx)(G,{onClick:a,lable:"Find"},"find")]}),h,f,Object(d.jsx)("ul",{className:"item-list list-group",children:K(l,s)}),Object(d.jsx)(W,{nextPage:c,prevPage:i,foundCount:o,loading:u,onChangePage:r})]})}),Z=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={term:"",foundPeople:[],nextPage:null,prevPage:null,foundCount:null,loading:!1},e.setAppState=e.props.setAppState,e.swapi=new b,e.onChange=function(t){var n=t.target.value;if(""!==n&&null!==n)e.setState({term:n});else{var a={term:"",foundPeople:[],nextPage:null,prevPage:null,foundCount:null,loading:!1};e.setState(a),e.setAppState(a)}},e.onInput=function(){""!==e.state.term&&(e.setState({loading:!0,foundPeople:[]}),e.swapi.getSearchPeople(e.state.term).then((function(t){var n=t.foundPeople,a=t.dataPeople,r={foundPeople:n,nextPage:a.next,prevPage:a.previous,foundCount:a.count,loading:!1,term:e.state.term};e.setState(r),e.setAppState(r)})))},e.onChangePage=function(t){e.setState({loading:!0,foundPeople:[]});var n="next"===t.key?e.state.nextPage:e.state.prevPage;e.swapi.getFoundPeoplePage(n).then((function(t){var n=t.foundPeople,a=t.dataPeople,r={foundPeople:n,nextPage:a.next,prevPage:a.previous,foundCount:a.count,loading:!1,term:e.state.term};e.setState(r),e.setAppState(r)}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState(Object(I.a)({},this.props.appState))}},{key:"render",value:function(){return Object(d.jsx)(Y,{state:this.state,onChange:this.onChange,onInput:this.onInput,onChangePage:this.onChangePage,history:this.props.history})}}]),n}(r.a.Component),$=C((function(e){return Object(d.jsxs)(E,Object(I.a)(Object(I.a)({},e),{},{children:[Object(d.jsx)(L,{field:"gender",label:"Gender:"}),Object(d.jsx)(L,{field:"eyeColor",label:"Eye color:"})]}))}),(function(e){return{getData:e.getPerson,getImageURL:e.getPersonImage}})),q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).swappi=new b,e.state={term:"",foundPeople:[],nextPage:null,prevPage:null,foundCount:null},e.setAppState=function(t){e.setState(t)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return Object(d.jsx)(O,{value:{appState:this.state,swapi:this.swappi,setAppState:this.setAppState},children:Object(d.jsx)(p.a,{children:Object(d.jsxs)("div",{className:"stardb-app",children:[Object(d.jsx)(j,{}),Object(d.jsx)(y,{}),Object(d.jsx)(U.a,{path:"/",component:function(t){var n=t.history;return Object(d.jsx)(Z,{appState:e.state,setAppState:e.setAppState,history:n})},exact:!0}),Object(d.jsx)(U.a,{path:"/people",exact:!0,component:B}),Object(d.jsx)(U.a,{path:"/people/:id",render:function(e){var t=e.match.params.id;return Object(d.jsx)($,{itemId:t})}}),Object(d.jsx)(U.a,{path:"/planets",component:T}),Object(d.jsx)(U.a,{path:"/starships",exact:!0,component:J}),Object(d.jsx)(U.a,{path:"/starships/:id",render:function(e){var t=e.match.params.id;return Object(d.jsx)(z,{itemId:t})}})]})})})}}]),n}(r.a.Component);c.a.render(Object(d.jsx)(q,{}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.6746e1fc.chunk.js.map